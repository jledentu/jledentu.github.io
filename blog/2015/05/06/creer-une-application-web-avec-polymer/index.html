<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
	  <title>Créer une application web avec Polymer | Jérémie Ledentu</title>
	  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="Dans l’article précédent, j’introduisais la notion de web components. Nous allons voir maintenant comment créer rapidement une petite application web (Single Page App) en assemblant des composants Po">
<meta property="og:type" content="article">
<meta property="og:title" content="Créer une application web avec Polymer">
<meta property="og:url" content="http://www.jeremie-ledentu.com/blog/2015/05/06/creer-une-application-web-avec-polymer/index.html">
<meta property="og:site_name" content="Jérémie Ledentu">
<meta property="og:description" content="Dans l’article précédent, j’introduisais la notion de web components. Nous allons voir maintenant comment créer rapidement une petite application web (Single Page App) en assemblant des composants Po">
<meta property="og:image" content="http://www.jeremie-ledentu.com/images/polymer-logo.png">
<meta property="og:image" content="http://www.jeremie-ledentu.com/images/polymer-app-1.png">
<meta property="og:image" content="http://www.jeremie-ledentu.com/images/polymer-app-2.png">
<meta property="og:image" content="http://www.jeremie-ledentu.com/images/polymer-app-3.png">
<meta property="og:image" content="http://www.jeremie-ledentu.com/images/polymer-app-4.png">
<meta property="og:image" content="http://www.jeremie-ledentu.com/images/polymer-app-5.png">
<meta property="og:image" content="http://www.jeremie-ledentu.com/images/polymer-app-6.png">
<meta property="og:image" content="http://www.jeremie-ledentu.com/images/polymer-app-tests1.png">
<meta property="og:updated_time" content="2016-05-31T21:06:40.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Créer une application web avec Polymer">
<meta name="twitter:description" content="Dans l’article précédent, j’introduisais la notion de web components. Nous allons voir maintenant comment créer rapidement une petite application web (Single Page App) en assemblant des composants Po">
<meta name="twitter:image" content="http://www.jeremie-ledentu.com/images/polymer-logo.png">
<meta name="twitter:creator" content="@jledentu">
  
    <link rel="alternate" href="/atom.xml" title="Jérémie Ledentu" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
		<link href='http://fonts.googleapis.com/css?family=Open+Sans:400,700,700italic,400italic' rel='stylesheet' type='text/css'>
		<link href='http://fonts.googleapis.com/css?family=Droid+Serif' rel='stylesheet' type='text/css'>
		<link href='http://fonts.googleapis.com/css?family=Inconsolata:400,700' rel='stylesheet' type='text/css'>
  <link rel="stylesheet" href="/css/style.css">
		<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.2/css/font-awesome.min.css" rel="stylesheet" type="text/css">
  
<!-- Google Analytics -->
<script type="text/javascript">
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-58820068-1', 'auto');
ga('send', 'pageview');

</script>
<!-- End Google Analytics -->


</head>

<body>
    <nav class="navbar navbar-default navbar-static-top" role="navigation">
	<div class="container">
		<button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
			<span class="sr-only">Toggle navigation</span>
			<span class="icon-bar"></span>
			<span class="icon-bar"></span>
			<span class="icon-bar"></span>
		</button>
		<a class="navbar-brand" href="/">
			<div class="hidden-xs">[ <span class="title1">jeremie</span><span class="title2">ledentu</span> ]</div>
			<div class="visible-xs-inline-block">[<span class="title1">j</span><span class="title2">l</span>]</div>
		</a>
		<nav class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
			<ul class="nav navbar-nav navbar-right">
				
				<li>
					<a class="main-nav-link" href="/">Blog</a>
				</li>
				
				<li>
					<a class="main-nav-link" href="/archives">Archives</a>
				</li>
				
			</ul>
		</nav>
	</div>
</nav>

    <section id="main">
			<article id="post-creer-une-application-web-avec-polymer" class="container article article-type-post" itemscope itemprop="blogPost">

	<header class="page-header">
		
    
  
    <h1 class="entry-title" itemprop="name">
      Créer une application web avec Polymer
    </h1>
  


		

    
      <p class="meta">
        <span class="post-date">
	<time datetime="2015-05-06T12:40:00.000Z" itemprop="datePublished">6 mai 2015</time>
</span>

				
           | <a href="http://www.jeremie-ledentu.com/blog/2015/05/06/creer-une-application-web-avec-polymer/#disqus_thread">Commentaires</a>
        
      </p>
    
  </header>
	
	<div class="entry-content"><img src="/images/polymer-logo.png" class="pull-right img-responsive">
<p>Dans <a href="/blog/2015/04/01/a-la-decouverte-des-web-components/">l’article précédent</a>, j’introduisais la notion de <em>web components</em>. Nous allons voir maintenant comment créer rapidement une petite application web (<em>Single Page App</em>) en assemblant des composants <a href="https://www.polymer-project.org/" target="_blank" rel="external">Polymer</a>, la bibliothèque de Google qui permet de créer des <em>web components</em> facilement, et fournit de base des éléments très utiles.</p>
<p> <em><strong>Note</strong> : j’ai utilisé ici la version 0.5 de Polymer. La prochaine version majeure (0.8) introduira un certain nombre de changements, mais les concepts présentés ici resteront valables.</em></p>
<a id="more"></a>
<h2 id="Installation-de-Polymer"><a href="#Installation-de-Polymer" class="headerlink" title="Installation de Polymer"></a>Installation de Polymer</h2><p>Polymer peut être récupéré <a href="https://www.polymer-project.org/resources/tooling-strategy.html#git" target="_blank" rel="external">avec Git à partir de Github</a>, ou bien <a href="https://www.polymer-project.org/docs/start/getting-the-code.html#using-zip" target="_blank" rel="external">en téléchargeant le ZIP</a>, ou encore en utilisant le gestionnaire de dépendances Bower. C’est cette dernière méthode qui est officiellement recommandée, et que je vais vous présenter.</p>
<p><a href="http://bower.io/#install-bower" target="_blank" rel="external">Installez Bower</a>. Si Bower n’est pas encore configuré dans votre projet, exécutez cette commande à la racine de votre projet pour créer un fichier <code>bower.json</code>&nbsp;:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bower init</span><br></pre></td></tr></table></figure>
<p>Puis installez Polymer :</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bower install --save Polymer/polymer#^0.5</span><br></pre></td></tr></table></figure>
<p>L’installation de Polymer installe également la dépendance <code>webcomponents.js</code>, un <em>polyfill</em> qui étend le support des <em>web components</em> aux navigateurs qui ne les supportent pas nativement.</p>
<p>Pour installer les core-elements&nbsp;:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bower install --save Polymer/core-elements</span><br></pre></td></tr></table></figure>
<h2 id="Structure-de-l’application"><a href="#Structure-de-l’application" class="headerlink" title="Structure de l’application"></a>Structure de l’application</h2><p>Pour créer le layout de l’application, on peut utiliser un élément <code>core-scaffold</code>&nbsp;:</p>
<figure class="highlight html"><figcaption><span>index.html</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Polymer<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"viewport"</span> <span class="attr">content</span>=<span class="string">"width=device-width, initial-scale=1.0, maximum-scale=1.0"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"mobile-web-app-capable"</span> <span class="attr">content</span>=<span class="string">"yes"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"apple-mobile-web-app-capable"</span> <span class="attr">content</span>=<span class="string">"yes"</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"/bower_components/webcomponentsjs/webcomponents.min.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"import"</span> <span class="attr">href</span>=<span class="string">"/bower_components/core-scaffold/core-scaffold.html"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"import"</span> <span class="attr">href</span>=<span class="string">"/bower_components/core-header-panel/core-header-panel.html"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"import"</span> <span class="attr">href</span>=<span class="string">"/bower_components/core-menu/core-menu.html"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"import"</span> <span class="attr">href</span>=<span class="string">"/bower_components/core-item/core-item.html"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"import"</span> <span class="attr">href</span>=<span class="string">"/bower_components/core-icons/social-icons.html"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">core-scaffold</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">core-header-panel</span> <span class="attr">navigation</span> <span class="attr">flex</span> <span class="attr">mode</span>=<span class="string">"seamed"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">core-menu</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">core-item</span> <span class="attr">icon</span>=<span class="string">"polymer"</span> <span class="attr">label</span>=<span class="string">"Projects"</span>&gt;</span><span class="tag">&lt;/<span class="name">core-item</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">core-item</span> <span class="attr">icon</span>=<span class="string">"social:people"</span> <span class="attr">label</span>=<span class="string">"People"</span>&gt;</span><span class="tag">&lt;/<span class="name">core-item</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">core-menu</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">core-header-panel</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">tool</span>&gt;</span>Polymer<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span>&gt;</span>Contenu<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">core-scaffold</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>Avec peu de code, on obtient ceci&nbsp;:</p>
<img src="/images/polymer-app-1.png" class="center-block img-responsive img-bordered">
<p>Pour l’affichage du contenu, on va utiliser l’élément <code>core-animated-pages</code>, qui permet de switcher entre plusieurs pages de façon animée&nbsp;:</p>
<figure class="highlight html"><figcaption><span>index.html</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"import"</span> <span class="attr">href</span>=<span class="string">"/bower_components/core-animated-pages/core-animated-pages.html"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"import"</span> <span class="attr">href</span>=<span class="string">"/bower_components/core-animated-pages/transitions/slide-from-right.html"</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight html"><figcaption><span>index.html</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">layout</span> <span class="attr">horizontal</span> <span class="attr">center-center</span> <span class="attr">fit</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- Pages --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">core-animated-pages</span> <span class="attr">selected</span>=<span class="string">"0"</span> <span class="attr">transitions</span>=<span class="string">"slide-from-right"</span> <span class="attr">fit</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">section</span> <span class="attr">fit</span> <span class="attr">layout</span> <span class="attr">vertical</span> <span class="attr">center-center</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h1</span>&gt;</span>Projects<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">section</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">section</span> <span class="attr">fit</span> <span class="attr">layout</span> <span class="attr">vertical</span> <span class="attr">center-center</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h1</span>&gt;</span>People<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">section</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">core-animated-pages</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>Notez les attributs <code>layout</code>, <code>vertical</code>, <code>center-center</code>, <code>fit</code>. Ce sont des attributs apportés par Polymer pour la <a href="https://www.polymer-project.org/docs/polymer/layout-attrs.html" target="_blank" rel="external">mise en page</a>. Il est possible de positionner, centrer, aligner des éléments HTML sans écrire une seule ligne de CSS&nbsp;!</p>
<img src="/images/polymer-app-2.png" class="center-block img-responsive img-bordered">
<h2 id="Utiliser-du-Data-Binding"><a href="#Utiliser-du-Data-Binding" class="headerlink" title="Utiliser du Data Binding"></a>Utiliser du Data Binding</h2><p>Bon c’est bien beau tout ça, mais notre contenu n’est pas du tout dynamique (l’attribut <code>selected</code> reste à <code>0</code> ce qui affiche la première page). Pour cela, on va utiliser du <em>two-way data binding</em>, mécanisme apporté par Polymer aux templates HTML, qui permet de lier la valeur d’un attribut ou d’un élément de texte à une variable du modèle de template. Pour s’en servir en-dehors d’un composant Polymer, on ajoute un template avec l’attribut <code>is=&quot;auto-binding&quot;</code>&nbsp;:</p>
<figure class="highlight html"><figcaption><span>index.html</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">template</span> <span class="attr">is</span>=<span class="string">"auto-binding"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">core-scaffold</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- ... --&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">core-scaffold</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>Puis, on ajoute un binding <code>{{page}}</code> sur l’attribut <code>selected</code> du menu&nbsp;:</p>
<figure class="highlight html"><figcaption><span>index.html</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">core-menu</span> <span class="attr">selected</span>=<span class="string">"&#123;&#123;page&#125;&#125;"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">core-item</span> <span class="attr">icon</span>=<span class="string">"polymer"</span> <span class="attr">label</span>=<span class="string">"Projects"</span>&gt;</span><span class="tag">&lt;/<span class="name">core-item</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">core-item</span> <span class="attr">icon</span>=<span class="string">"social:people"</span> <span class="attr">label</span>=<span class="string">"People"</span>&gt;</span><span class="tag">&lt;/<span class="name">core-item</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">core-menu</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>Et sur l’attribut <code>selected</code> du <code>core-animated-pages</code> :</p>
<figure class="highlight html"><figcaption><span>index.html</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">core-animated-pages</span> <span class="attr">selected</span>=<span class="string">"&#123;&#123;page&#125;&#125;"</span> <span class="attr">transitions</span>=<span class="string">"slide-from-right"</span> <span class="attr">fit</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">section</span> <span class="attr">fit</span> <span class="attr">layout</span> <span class="attr">vertical</span> <span class="attr">center-center</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">h1</span>&gt;</span>Projects<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">section</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">section</span> <span class="attr">fit</span> <span class="attr">layout</span> <span class="attr">vertical</span> <span class="attr">center-center</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">h1</span>&gt;</span>People<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">section</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">core-animated-pages</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>Le menu est désormais relié aux pages. En cliquant sur l’entrée “People”, la page “People” s’affiche, etc.</p>
<h2 id="Requetes-Ajax"><a href="#Requetes-Ajax" class="headerlink" title="Requêtes Ajax"></a>Requêtes Ajax</h2><p>Le composant <code>core-ajax</code> permet de faire des requêtes Ajax. Utilisons-le pour obtenir la liste des projets Polymer dans Github&nbsp;:</p>
<figure class="highlight html"><figcaption><span>index.html</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"import"</span> <span class="attr">href</span>=<span class="string">"/bower_components/core-ajax/core-ajax.html"</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight html"><figcaption><span>index.html</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">core-ajax</span></span><br><span class="line">  <span class="attr">id</span>=<span class="string">"ajaxProjects"</span></span><br><span class="line">  <span class="attr">auto</span></span><br><span class="line">  <span class="attr">url</span>=<span class="string">"https://api.github.com/orgs/Polymer/repos"</span></span><br><span class="line">  <span class="attr">handleAs</span>=<span class="string">"json"</span>&gt;</span><span class="tag">&lt;/<span class="name">core-ajax</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">template</span> <span class="attr">is</span>=<span class="string">"auto-binding"</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- ... --&gt;</span></span><br></pre></td></tr></table></figure>
<p>Ici, le paramètre <code>auto</code> indique que la requête XHR est faite automatiquement quand l’attribut <code>url</code> est modifié. Un événement <code>core-response</code> permet de traiter la réponse (ici en JSON). On ajoute une <em>callback</em> pour ajouter un paramètre <code>projects</code> au modèle du template, qu’on va pouvoir utiliser comme <em>data binding</em> :</p>
<figure class="highlight html"><figcaption><span>index.html</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span><br><span class="line">document.addEventListener('polymer-ready', function() &#123;</span><br><span class="line">  var ajaxProjects = document.getElementById('ajaxProjects');</span><br><span class="line">  ajaxProjects.addEventListener('core-response',</span><br><span class="line">    function(e) &#123;</span><br><span class="line">      document.querySelector('template').model = &#123;</span><br><span class="line">        projects: e.detail.response</span><br><span class="line">      &#125;;</span><br><span class="line">    &#125;</span><br><span class="line">  );</span><br><span class="line">&#125;);</span><br><span class="line"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>On utilise maintenant un template itératif de Polymer pour afficher le contenu de <code>projects</code>&nbsp;:</p>
<figure class="highlight html"><figcaption><span>index.html</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">core-animated-pages</span> <span class="attr">selected</span>=<span class="string">"&#123;&#123;page&#125;&#125;"</span> <span class="attr">transitions</span>=<span class="string">"slide-from-right"</span> <span class="attr">fit</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">section</span> <span class="attr">fit</span> <span class="attr">layout</span> <span class="attr">vertical</span> <span class="attr">center-center</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">h1</span>&gt;</span>Projects<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">template</span> <span class="attr">repeat</span>=<span class="string">"&#123;&#123;p in projects&#125;&#125;"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span>&gt;</span>&#123;&#123;p.name&#125;&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">section</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>L’attribut <code>repeat</code> du template permet de générer un fragment de DOM pour chaque élément du tableau <code>projects</code>.<br>Et voici le résultat&nbsp;:</p>
<img src="/images/polymer-app-3.png" class="center-block img-responsive img-bordered">
<h2 id="Creer-un-nouveau-composant"><a href="#Creer-un-nouveau-composant" class="headerlink" title="Créer un nouveau composant"></a>Créer un nouveau composant</h2><p>Nous allons maintenant voir comment créer notre propre composant Polymer. Ici, on veut générer une carte pour afficher les détails d’un projet Github.</p>
<h3 id="Structure-du-composant"><a href="#Structure-du-composant" class="headerlink" title="Structure du composant"></a>Structure du composant</h3><p>Dans un fichier <code>project-card/project-card.html</code>, créons la structure du composant&nbsp;:</p>
<figure class="highlight html"><figcaption><span>project-card/project-card.html</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"import"</span> <span class="attr">href</span>=<span class="string">"/bower_components/polymer/polymer.html"</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">polymer-element</span> <span class="attr">name</span>=<span class="string">"project-card"</span> <span class="attr">noscript</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h2</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">"project-name"</span>&gt;</span>Nom du projet<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">"project-desc"</span>&gt;</span>description<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">polymer-element</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>Cette syntaxe permet de créer et enregistrer un nouvel élément <code>project-card</code>, avec un template qui sera cloné et ajouté au Shadow DOM. L’attribut <code>noscript</code> indique qu’il n’y a pas de JavaScript associé, et l’élément est ajouté au registre automatiquement.</p>
<h3 id="Ajouter-des-attributs"><a href="#Ajouter-des-attributs" class="headerlink" title="Ajouter des attributs"></a>Ajouter des attributs</h3><p>On désire ajouter des attributs pour rendre notre composant paramétrable. On peut utiliser pour cela l’attribut <code>attributes</code> :</p>
<figure class="highlight html"><figcaption><span>project-card/project-card.html</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">polymer-element</span> <span class="attr">name</span>=<span class="string">"project-card"</span> <span class="attr">noscript</span> <span class="attr">attributes</span>=<span class="string">"name url description"</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>Faisons le lien entre nos attributs et le contenu de notre composant en utilisant des <em>data bindings</em>&nbsp;:</p>
<figure class="highlight html"><figcaption><span>project-card/project-card.html</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">polymer-element</span> <span class="attr">name</span>=<span class="string">"project-card"</span> <span class="attr">noscript</span> <span class="attr">attributes</span>=<span class="string">"name url description"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h2</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">"project-name"</span> <span class="attr">href</span>=<span class="string">"&#123;&#123;url&#125;&#125;"</span>&gt;</span>&#123;&#123;name&#125;&#125;<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">"project-desc"</span>&gt;</span>&#123;&#123;description&#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">polymer-element</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>Utilisons ce composant pour afficher les projets Github de Polymer dans notre <code>index.html</code>&nbsp;:</p>
<figure class="highlight html"><figcaption><span>index.html</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"import"</span> <span class="attr">href</span>=<span class="string">"/project-card/project-card.html"</span>&gt;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight html"><figcaption><span>index.html</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">section</span> <span class="attr">fit</span> <span class="attr">layout</span> <span class="attr">vertical</span> <span class="attr">center-center</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">fit</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h1</span>&gt;</span>Projects<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">template</span> <span class="attr">repeat</span>=<span class="string">"&#123;&#123;p in projects&#125;&#125;"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">project-card</span> <span class="attr">name</span>=<span class="string">"&#123;&#123;p.name&#125;&#125;"</span> <span class="attr">url</span>=<span class="string">"&#123;&#123;p.html_url&#125;&#125;"</span> <span class="attr">description</span>=<span class="string">"&#123;&#123;p.description&#125;&#125;"</span>&gt;</span><span class="tag">&lt;/<span class="name">project-card</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">section</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>Voilà ce que ça donne&nbsp;:</p>
<img src="/images/polymer-app-4.png" class="center-block img-responsive img-bordered">
<h3 id="Un-peu-de-style"><a href="#Un-peu-de-style" class="headerlink" title="Un peu de style"></a>Un peu de style</h3><p>On peut modifier l’aspect du composant en ajoutant une balise <code>style</code> dans son template&nbsp;:</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">polymer-element</span> <span class="attr">name</span>=<span class="string">"project-card"</span> <span class="attr">noscript</span> <span class="attr">attributes</span>=<span class="string">"name url description"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="undefined"></span><br><span class="line">    :host &#123;</span><br><span class="line">      display: block;</span><br><span class="line">      border: solid 1px #ddd;</span><br><span class="line">      margin-bottom: 10px;</span><br><span class="line">      padding: 10px;</span><br><span class="line">      background-color: white;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    .project-name &#123;</span><br><span class="line">      text-decoration: none;</span><br><span class="line">      color: black;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    .project-desc &#123;</span><br><span class="line">      color: #888;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h2</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">"project-name"</span> <span class="attr">href</span>=<span class="string">"&#123;&#123;url&#125;&#125;"</span>&gt;</span>&#123;&#123;name&#125;&#125;<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">"project-desc"</span>&gt;</span>&#123;&#123;description&#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">polymer-element</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>Et voici ce qu’on obtient dans l’application&nbsp;:</p>
<img src="/images/polymer-app-5.png" class="center-block img-responsive img-bordered">
<h3 id="Scripter-le-composant"><a href="#Scripter-le-composant" class="headerlink" title="Scripter le composant"></a>Scripter le composant</h3><p>Pour scripter le composant et programmer son fonctionnement, on peut ajouter une balise <code>script</code> dans la définition du composant (sans oublier de retirer l’attribut <code>noscript</code>)&nbsp;:</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"import"</span> <span class="attr">href</span>=<span class="string">"/bower_components/polymer/polymer.html"</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">polymer-element</span> <span class="attr">name</span>=<span class="string">"project-card"</span> <span class="attr">attributes</span>=<span class="string">"name url description"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">template</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="undefined"></span><br><span class="line">    :host &#123;</span><br><span class="line">      display: block;</span><br><span class="line">      border: solid 1px #ddd;</span><br><span class="line">      margin: 10px;</span><br><span class="line">      padding: 10px;</span><br><span class="line">      background-color: white;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    .project-name &#123;</span><br><span class="line">      text-decoration: none;</span><br><span class="line">      color: &#123;&#123;isPolymer ? 'red' : 'black'&#125;&#125;;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    .project-desc &#123;</span><br><span class="line">      color: #888;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h2</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">"project-name"</span> <span class="attr">href</span>=<span class="string">"&#123;&#123;url&#125;&#125;"</span>&gt;</span>&#123;&#123;name&#125;&#125;<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">"project-desc"</span>&gt;</span>&#123;&#123;description&#125;&#125;<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span><br><span class="line">  Polymer('project-card', &#123;</span><br><span class="line">    isPolymer: false,</span><br><span class="line"></span><br><span class="line">    created: function() &#123;&#125;,</span><br><span class="line">    domReady: function() &#123;&#125;,</span><br><span class="line">    ready: function() &#123;&#125;,</span><br><span class="line">    attached: function() &#123;&#125;,</span><br><span class="line">    detached: function() &#123;&#125;,</span><br><span class="line">    attributeChanged: function(attr, oldVal, newVal) &#123;&#125;,</span><br><span class="line"></span><br><span class="line">    nameChanged: function(oldValue, newValue) &#123;</span><br><span class="line">      if (newValue === 'polymer') &#123;</span><br><span class="line">        this.isPolymer = true;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;);</span><br><span class="line">  </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">polymer-element</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>On peut y trouver les <em>callbacks</em> du cycle de vie du composant :</p>
<ul>
<li><code>created</code>&nbsp;: appelé à la création de l’élément&nbsp;;</li>
<li><code>domReady</code>&nbsp;: appelé quand les enfants et les voisins de cet élément dans le DOM existent&nbsp;;</li>
<li><code>ready</code>&nbsp;: appelé quand ce composant Polymer est prêt&nbsp;;</li>
<li><code>attached</code>&nbsp;: appelé quand cet élément a été inséré dans le DOM&nbsp;;</li>
<li><code>detached</code>&nbsp;: appelé quand cet élément a été retiré du DOM&nbsp;;</li>
<li><code>attributeChanged</code>&nbsp;: appelé quand un attribut a été ajouté, retiré, modifié.</li>
</ul>
<p>Ici, on crée une <em>callback</em> sur l’attribut <code>name</code> pour modifier une propriété du composant <code>isPolymer</code>, utilisée dans une expression de <em>data binding</em> pour mettre en valeur le projet Polymer. Résultat&nbsp;:</p>
<img src="/images/polymer-app-6.png" class="center-block img-responsive img-bordered">
<p>Bien sûr, le script présenté ici n’est pas très intéressant, mais c’est juste un exemple. En réalité, on scripterait les interactions avec le composant, la mise à jour de son état, etc.</p>
<h3 id="Tester-le-composant"><a href="#Tester-le-composant" class="headerlink" title="Tester le composant"></a>Tester le composant</h3><p>Polymer propose un outil pour tester des composants&nbsp;: web-component-tester.</p>
<p>Installez-le avec la commande suivante&nbsp;:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install -g web-component-tester</span><br></pre></td></tr></table></figure>
<p>Et&nbsp;:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bower install --save-dep web-component-tester</span><br></pre></td></tr></table></figure>
<p>Créez un fichier <code>test/project-card-tests.html</code>. Ce fichier va contenir des suites de tests, soit des ensembles d’assertions pour tester l’état et le comportement du composant. Ici, on teste juste la valeur par défaut de l’attribut <code>isPolymer</code>&nbsp;:</p>
<figure class="highlight html"><figcaption><span>test/project-card-tests.html</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"../bower_components/webcomponentsjs/webcomponents.min.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"../bower_components/web-component-tester/browser.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"import"</span> <span class="attr">href</span>=<span class="string">"../project-card/project-card.html"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">project-card</span>&gt;</span><span class="tag">&lt;/<span class="name">project-card</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="xml"></span><br><span class="line">  var pCard = document.querySelector('project-card');</span><br><span class="line"></span><br><span class="line">  suite('<span class="tag">&lt;<span class="name">project-card</span>&gt;</span>', function() &#123;</span><br><span class="line"></span><br><span class="line">    test('default attribute values', function() &#123;</span><br><span class="line">      assert(pCard.isPolymer === false, 'isPolymer is false');</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;);</span><br><span class="line"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>On peut créer un fichier <code>test/index.html</code> qui va exécuter les tests des composants de notre application, grâce à la méthode <code>WCT.loadSuites</code>&nbsp;:</p>
<figure class="highlight html"><figcaption><span>test/index.html</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"../bower_components/web-component-tester/browser.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"import"</span> <span class="attr">href</span>=<span class="string">"../project-card-tests.html"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span><br><span class="line">    WCT.loadSuites([</span><br><span class="line">      'project-card-tests.html'</span><br><span class="line">    ]);</span><br><span class="line">  </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>Et voilà ce que ça donne si on affiche la page de test&nbsp;:</p>
<img src="/images/polymer-app-tests1.png" class="center-block img-responsive img-bordered">
<p>On peut également exécuter la commande <code>wct</code> à la racine de l’application, qui va exécuter les tests sur les différents navigateurs du système grâce à Selenium&nbsp;:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wct</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">Starting Selenium server for local browsers</span><br><span class="line">Selenium server running on port 52803</span><br><span class="line">Web server running on port 52812 and serving from /Users/jeremie/prog/polymer-app</span><br><span class="line">chrome 42                Beginning tests via http://localhost:52812/components/polymer-app/generated-index.html?cli_browser_id=0</span><br><span class="line">chrome 42                Tests passed</span><br><span class="line">firefox 37               Beginning tests via http://localhost:52812/components/polymer-app/generated-index.html?cli_browser_id=1</span><br><span class="line">firefox 37               Tests passed</span><br><span class="line">chrome 42 (1/0/0)                       firefox 37 (1/0/0)</span><br></pre></td></tr></table></figure>
<h2 id="Conclusion"><a href="#Conclusion" class="headerlink" title="Conclusion"></a>Conclusion</h2><p>On a vu ici comment créer une application web rapidement en assemblant des composants Polymer, fournis ou créés <em>from scratch</em>. Pour aller plus loin, nous aurions pu&nbsp;:</p>
<ul>
<li>faire communiquer différents composants avec des signaux (<code>core-signals</code>) ;</li>
<li>utiliser du routage, grâce au composant <a href="https://github.com/erikringsmuth/app-router" target="_blank" rel="external"><code>app-router</code></a> ;</li>
<li>utiliser Vulcanize pour <a href="https://www.polymer-project.org/0.5/articles/concatenating-web-components.html" target="_blank" rel="external">concaténer des composants</a> et réduire le nombre de requêtes…</li>
</ul>
<p>Vous pouvez jeter un coup d’œil au code source de cette application d’exemple sur <a href="https://github.com/jledentu/polymer-app" target="_blank" rel="external">Github</a> (j’ai généré le projet en utilisant <a href="http://yeoman.io/" target="_blank" rel="external">Yeoman</a> et le générateur <a href="https://github.com/yeoman/generator-polymer" target="_blank" rel="external">Polymer</a>, ce que je vous conseille de faire également).</p>
<p><em>Merci à <a href="https://twitter.com/manekinekko" target="_blank" rel="external">Wassim Chegham</a> pour sa relecture.</em></p>
</div>
	

  
	<footer>
		<p class="sharing">
  
	<a href="https://twitter.com/share" class="twitter-share-button" data-url="http://www.jeremie-ledentu.com/blog/2015/05/06/creer-une-application-web-avec-polymer/" data-via="jledentu" data-text="Créer une application web avec Polymer" data-size="large">Tweeter</a>
	
  
  <span class="g-plusone" data-size="large"></span>
  
</p>

    
<p class="meta">
	
		<a class="basic-alignment pull-left" href="/blog/2015/04/01/a-la-decouverte-des-web-components/">&larr; À la découverte des Web Components</a>
	
	
</p>


	</footer>
  

	
	<section id="comments">
	  <div id="disqus_thread">
	    <noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
	  </div>
	</section>
	
</article>

		</section>
    <footer class="footer" role="contentinfo">
	<div class="container">
		<div id="social-buttons">
		
		<a href="https://twitter.com/jledentu" class="btn-twitter"><i class="fa fa-twitter"></i></a>
		
		
		
		<a href="https://github.com/jledentu" class="btn-github"><i class="fa fa-github"></i></a>
		
		
		<a href="/atom.xml" class="btn-rss"><i class="fa fa-rss"></i></a>
		</div>

		<div class="info">
			Copyright &copy; 2016 - Jérémie Ledentu -
			<span class="credit">Propulsé par <a href="http://hexo.io/" target="_blank">Hexo</a></span>
		</div>
	</div>
</footer>

		
<script>
  var disqus_shortname = 'jledentu';
  
  var disqus_url = 'http://www.jeremie-ledentu.com/blog/2015/05/06/creer-une-application-web-avec-polymer/';
  
  (function(){
    var dsq = document.createElement('script');
    dsq.type = 'text/javascript';
    dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
</script>


<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script>


<script type="text/javascript">
  (function() {
    var script = document.createElement('script'); script.type = 'text/javascript'; script.async = true;
    script.src = 'https://apis.google.com/js/plusone.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(script, s);
  })();
</script>


</body>
</html>
